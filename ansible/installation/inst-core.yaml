---
- name: install core packages
  hosts: "{{ hosts }}"
  become: yes
  tasks:
    - name: Install "{{ item }}"
      apt:
        name: "{{ item }}"
        update_cache: yes
      loop:
        - htop
        - nfs-common
        - vim
        - tmux
        - ncdu
        - docker.io
        - docker-compose
        - samba
      register: package_results

    - name: Log package installation results
      debug:
        msg: "{{ item.item }} package installed: {{ item.changed }}"
      loop: "{{ package_results.results }}"
