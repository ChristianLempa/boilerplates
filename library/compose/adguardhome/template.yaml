---
kind: compose
metadata:
  name: AdGuard Home
  description: |-
    Network-wide software for blocking ads and tracking. AdGuard Home operates as a DNS server that
    re-routes tracking domains to a "black hole", thus preventing your devices from connecting to those servers.
    It features advanced DNS filtering, parental controls, safe browsing, and HTTPS/DNS-over-TLS/DNS-over-QUIC support.
    ## Prerequisites
    - :info: During the initial setup, AdGuard Home runs an HTTP server on port 3000 to guide you through configuration.
    After completing the setup, AdGuard Home switches to the configured HTTP port, and port, consider re-deploying the
    service with `initial_setup=false`.
    - :warning: If you require DHCP functionality or want AdGuard Home to bind directly to port 53,
    you must set `network_mode` to `host` or `macvlan`. Note this exposes all container ports directly on the host.
    You can't use `traefik_enabled` in this case!
    ## References
    - **Project:** https://adguard.com/adguard-home/overview.html
    - **Documentation:** https://github.com/AdguardTeam/AdGuardHome/wiki
    - **GitHub:** https://github.com/AdguardTeam/AdGuardHome
  version: v0.107.69
  author: Christian Lempa
  date: '2025-11-13'
  tags:
    - traefik
    - network
    - volume
  next_steps:
schema: "1.2"
spec:
  general:
    vars:
      service_name:
        default: "adguardhome"
      initial_setup:
        description: "Enable initial setup wizard on port 3000"
        type: bool
        default: true
        extra: >
          Port 3000 is only used during the initial setup wizard.
          After completing setup, AdGuard Home switches to the configured HTTP port and port 3000 becomes inactive.
          Set to false if you've already completed the initial setup.
  traefik:
    vars:
      traefik_host:
        default: "adguardhome"
  network:
    vars:
      network_mode:
        extra: >
          Use 'host' mode if you need DHCP functionality or want AdGuard Home to bind directly to port 53.
          NOTE: Swarm only supports 'bridge' mode!
      network_name:
        default: "adguardhome_network"
  ports:
    vars:
      ports_http:
        default: 80
      ports_https:
        default: 443
      ports_initial:
        description: "Initial setup wizard port"
        type: int
        default: 3000
        needs: ["traefik_enabled=false", "initial_setup=true"]
        extra: >
          Only used during first-time setup. After configuration, port becomes inactive.
      ports_dns:
        description: "DNS port"
        type: int
        default: 53
      ports_tls:
        description: "DNS over TLS Port"
        type: int
        default: 853
      ports_dnscrypt:
        description: "DNSCrypt Port"
        type: int
        default: 5443
