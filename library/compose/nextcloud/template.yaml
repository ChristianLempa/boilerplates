---
kind: compose
metadata:
  name: Nextcloud
  description: 'Self-hosted file sync and share platform. Nextcloud is a suite of client-server software for creating and
    using file hosting services. It provides functionality similar to Dropbox, with the added benefit of being self-hosted
    and open-source.


    Project: https://nextcloud.com/

    Documentation: https://docs.nextcloud.com/

    GitHub: https://github.com/nextcloud/server

    '
  icon:
    provider: selfh
    id: nextcloud
  version: 32.0.5-apache
  author: Christian Lempa
  date: '2026-01-17'
  tags:
    - traefik
  draft: true
schema: '1.2'
spec:
  database:
    required: true
    vars:
      database_type:
        description: Database type (Nextcloud supports PostgreSQL or MySQL/MariaDB)
        type: enum
        options:
          - postgres
          - mysql
        default: postgres
      database_name:
        type: str
        required: true
      database_user:
        type: str
        required: true
      database_password:
        type: str
        sensitive: true
        required: true
  general:
    vars:
      service_name:
        default: nextcloud
      container_name:
        default: nextcloud
      container_timezone:
        type: str
      restart_policy:
        type: enum
        options:
          - unless-stopped
          - always
          - on-failure
          - 'no'
        default: unless-stopped
        required: true
  network:
    vars:
      network_macvlan_ipv4_address_db:
        description: Static IP address for database container (macvlan only)
        type: str
        default: 192.168.1.252
        needs: network_mode=macvlan
  ports:
    vars:
      ports_http:
        description: Host port for HTTP
        type: int
        default: 80
  nextcloud:
    description: Configure Nextcloud application settings
    vars:
      admin_user:
        description: Nextcloud admin username
        type: str
        default: admin
      admin_password:
        description: Nextcloud admin password
        type: str
        sensitive: true
        autogenerated: true
        default: ''
  traefik:
    vars:
      traefik_host:
        default: nextcloud
      traefik_network:
        default: traefik
        type: str
        required: true
      traefik_domain:
        default: home.arpa
        type: str
        required: true
      traefik_enabled:
        type: bool
        default: false
        description: Enable Traefik integration
  traefik_tls:
    vars:
      traefik_tls_certresolver:
        type: str
        default: cloudflare
        required: true
      traefik_tls_enabled:
        type: bool
        default: false
        description: Enable Traefik TLS
  swarm:
    vars:
      swarm_replicas:
        type: int
        default: 1
        needs:
          - swarm_placement_mode=replicated
        required: true
      swarm_enabled:
        type: bool
        default: false
        description: Enable Docker Swarm mode
      swarm_placement_host:
        type: str
        default: ''
        description: The placement host
      swarm_placement_mode:
        type: str
        default: replicated
        description: The placement mode
