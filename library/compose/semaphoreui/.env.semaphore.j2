# Ansible Semaphore Application Configuration
# Contains application settings and database connection

# Timezone
TZ={{ container_timezone }}

# Database Connection
{% if database_type == 'mysql' %}
SEMAPHORE_DB_DIALECT=mysql
{% elif database_type == 'postgres' %}
SEMAPHORE_DB_DIALECT=postgres
{% endif %}
{% if database_external %}
SEMAPHORE_DB_HOST={{ database_host }}
{% else %}
SEMAPHORE_DB_HOST={{ service_name }}-{{ database_type }}
{% endif %}
SEMAPHORE_DB_PORT={% if database_type == 'postgres' %}5432{% else %}3306{% endif %}
SEMAPHORE_DB={{ database_name }}
SEMAPHORE_DB_USER={{ database_user }}
SEMAPHORE_DB_PASS={{ database_password }}

# Admin Configuration
SEMAPHORE_ADMIN={{ semaphore_admin_name }}
SEMAPHORE_ADMIN_NAME={{ semaphore_admin_name }}
SEMAPHORE_ADMIN_EMAIL={{ semaphore_admin_email }}
SEMAPHORE_ADMIN_PASSWORD={{ semaphore_admin_password }}

# Playbook Configuration
SEMAPHORE_PLAYBOOK_PATH={{ semaphore_playbook_path }}

# Access Key Encryption
SEMAPHORE_ACCESS_KEY_ENCRYPTION={{ semaphore_access_key_encryption }}

# Ansible Settings
ANSIBLE_HOST_KEY_CHECKING={{ ansible_host_key_checking }}

{% if email_enabled -%}
# Email Server Configuration
SEMAPHORE_EMAIL_SENDER={{ email_from }}
SEMAPHORE_EMAIL_HOST={{ email_host }}
SEMAPHORE_EMAIL_PORT={{ email_port }}
SEMAPHORE_EMAIL_USERNAME={{ email_username }}
SEMAPHORE_EMAIL_PASSWORD={{ email_password }}
SEMAPHORE_EMAIL_SECURE={{ email_use_tls }}
{% endif %}
