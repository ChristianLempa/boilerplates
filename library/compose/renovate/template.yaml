---
kind: compose
metadata:
  icon:
    provider: selfh
    id: mend-renovate
  name: Renovate
  description: |-
    **Renovate** is an automated dependency update tool that creates pull requests for newer versions of dependencies.
    Supports GitHub, GitLab, Bitbucket, Gitea, and more platforms with flexible configuration options.

    ## Use Cases
    - Automated dependency updates for all your repositories
    - Security vulnerability patching
    - Multi-platform support (GitLab, GitHub, Bitbucket, etc.)
    - Customizable update schedules and rules
    - Self-hosted or cloud-based deployment

    ## Resources
    - **Project**: https://www.mend.io/renovate/
    - **Documentation**: https://docs.renovatebot.com/
    - **GitHub**: https://github.com/renovatebot/renovate

  version: 13.3.0-full
  author: Christian Lempa
  date: '2026-01-12'
  tags:
    - traefik
    - swarm
  draft: true
schema: "1.2"
spec:
  general:
    vars:
      service_name:
        default: "renovate"
      restart_policy:
        type: enum
        options: ["unless-stopped", "always", "on-failure", "no"]
        default: "unless-stopped"
      container_name:
        default: "renovate"
      container_hostname:
        default: "renovate"
      container_timezone:
        default: "UTC"
      container_loglevel:
        type: enum
        options: [debug, info, warn, error]
  renovate_settings:
    title: "Renovate Settings"
    required: true
    vars:
      renovate_platform:
        type: "enum"
        description: "Git Platform Type"
        options:
          - "gitlab"
          - "github"
          - "gitea"
        default: "gitlab"
      renovate_endpoint:
        type: "url"
        description: "Git Platform Endpoint URL"
        default: "https://gitlab.com"
        extra: "e.g., https://gitlab.com, https://github.com, https://selfhosted.home.arpa, ..."
      renovate_autodiscover:
        type: "bool"
        description: "Auto-discover repositories"
        default: false
        extra: "Automatically find and process all accessible repositories"
  authentication:
    title: "Authentication"
    required: true
    vars:
      git_token:
        type: "str"
        description: "Git platform Personal Access Token"
        sensitive: true
        extra: "Also used for public package lookups to avoid rate limiting"
      license_key:
        type: "str"
        description: "Mend Renovate CE License Key"
        sensitive: true
        extra: "Get a FREE license key at https://www.mend.io/mend-renovate-community/#self-hosted"
      webhook_secret:
        type: "str"
        description: "Webhook secret for platform integration"
        sensitive: true
        optional: true
        default: "renovate"
  ports:
    vars:
      ports_http:
        type: "int"
        description: "External HTTP port for web interface"
        default: 8080
  traefik:
    vars:
      traefik_enabled:
        type: bool
        default: false
      traefik_network:
        default: "traefik"
      traefik_host:
        default: "renovate"
      traefik_domain:
        default: "home.arpa"
      traefik_entrypoint:
        default: "web"
      traefik_tls_entrypoint:
        default: "websecure"
      traefik_tls_enabled:
        type: bool
        default: true
      traefik_tls_certresolver:
        default: "cloudflare"
  network:
    vars:
      network_mode:
        type: enum
        options: ["bridge", "host", "macvlan"]
        default: "bridge"
      network_name:
        default: "bridge"
  swarm:
    vars:
      swarm_enabled:
        type: bool
        default: false
      swarm_placement_mode:
        type: enum
        options: ["replicated", "global"]
        default: "replicated"
      swarm_replicas:
        type: int
        default: 1
        needs: "swarm_placement_mode=replicated"
      swarm_placement_host:
        default: ""
        needs: "swarm_placement_mode=replicated"
