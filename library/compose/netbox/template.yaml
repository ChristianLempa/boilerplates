---
kind: compose
schema: "1.2"
metadata:
  name: NetBox
  description: |
    Network infrastructure management (IPAM/DCIM) and network automation source of truth.
    Provides comprehensive API for managing IP addresses, circuits, devices, racks, cables,
    and other network infrastructure components with powerful automation capabilities.
    ## References
    * **Project:** https://netbox.dev/
    * **Documentation:** https://docs.netbox.dev/
    * **GitHub:** https://github.com/netbox-community/netbox
  version: 4.2.3
  author: Christian Lempa
  date: '2025-11-13'
  tags:
    - traefik
    - netbox
    - ipam
    - dcim
  next_steps: |
    ### 1. Start NetBox
    ```bash
    docker compose up -d
    ```
    ### 2. Wait for Initialization (2-5 minutes)
    ```bash
    docker compose logs -f {{ service_name }}
    ```
    ### 3. Create Superuser Account
    ```bash
    docker compose exec {{ service_name }} /opt/netbox/netbox/manage.py createsuperuser
    ```
    ### 4. Access the Web Interface
    {% if traefik_enabled -%}
    * Navigate to: **https://{{ traefik_host }}.{{ traefik_domain }}**
    {% else -%}
    * Navigate to: **http://localhost:{{ ports_http }}**
    {% endif -%}
    ### 5. Initial Configuration
    * Complete the setup wizard
    * Configure your network infrastructure (sites, racks, devices)
    * Set up IPAM (IP ranges, VLANs, prefixes)
    * Create user accounts and assign permissions
    ### 6. Security Recommendations
    * Enable two-factor authentication for admin accounts
    * Configure LDAP/SSO for user authentication (if needed)
    * Set up regular database backups
    * Review and customize user permissions
    * Configure change logging and webhooks
spec:
  general:
    vars:
      service_name:
        default: netbox
      container_name:
        default: netbox
      container_hostname:
        default: netbox
  database:
    required: true
    vars:
      database_name:
        default: netbox
      database_user:
        default: netbox
  redis:
    title: Redis Configuration
    description: Configure Redis for caching and task queuing
    required: true
    vars:
      redis_password:
        description: Redis password for authentication
        type: str
        sensitive: true
        autogenerated: true
  ports:
    vars:
      ports_http:
        description: Host port for HTTP
        type: int
        default: 8000
  traefik:
    vars:
      traefik_host:
        default: netbox
  netbox:
    title: NetBox Configuration
    description: Configure NetBox application settings
    required: true
    vars:
      netbox_secret_key:
        description: Secret Key
        extra: Used for cryptographic signing and session management
        type: str
        sensitive: true
        autogenerated: true
      netbox_allowed_hosts:
        description: Allowed hosts (space-separated)
        extra: Add your domain names or IP addresses
        type: str
        default: "*"
      netbox_cors_enabled:
        description: Enable CORS (Cross-Origin Resource Sharing)
        type: bool
        default: false
      netbox_cors_origins:
        description: Allowed CORS origins
        needs: netbox_cors_enabled=true
        type: str
        default: "https://example.com"
      netbox_metrics_enabled:
        description: Enable Prometheus metrics endpoint
        type: bool
        default: false
      netbox_webhooks_enabled:
        description: Enable webhook support
        type: bool
        default: true
      netbox_changelog_retention:
        description: Days to retain change log entries (0 = forever)
        type: int
        default: 90
      netbox_jobresult_retention:
        description: Days to retain job result entries (0 = forever)
        type: int
        default: 90
  email:
    vars:
      email_server:
        default: localhost
      email_port:
        default: 25
      email_from:
        default: netbox@example.com
