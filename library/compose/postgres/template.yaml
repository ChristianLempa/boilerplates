---
kind: compose
schema: "1.2"
metadata:
  icon:
    provider: selfh
    id: postgres
  name: PostgreSQL
  description: >
    PostgreSQL is a powerful, open source object-relational database system with over 30 years of active development
    that has earned it a strong reputation for reliability, feature robustness, and performance.


    Project: https://www.postgresql.org/

    Documentation: https://www.postgresql.org/docs/

    GitHub: https://github.com/postgres/postgres
  version: 17.6
  author: Christian Lempa
  date: '2025-09-28'
  tags:
    - swarm
    - volume_mode
spec:
  general:
    vars:
      service_name:
        default: "postgres"
      container_name:
        default: "postgres"
  ports:
    vars:
      ports_postgres:
        description: PostgreSQL port
        type: int
        default: 5432
  traefik:
    vars:
      traefik_host:
        default: "postgres"
  network:
    vars:
      network_mode:
        extra: >
          Use 'host' mode if you need to bind directly to port 5432.
          NOTE: Swarm only supports 'bridge' mode!
      network_name:
        default: "postgres_network"
  swarm:
    vars:
      swarm_replicas:
        description: Number of replicas for Swarm mode
        type: int
        default: 1
  volume:
    vars:
      volume_mode:
        description: Volume mounting mode (local, mount, nfs)
        type: str
        default: "local"
        options:
          - local
          - mount
          - nfs
      volume_mount_path:
        description: Path for bind mounts when volume_mode is 'mount'
        type: str
        default: "/var/lib/postgresql/data"
      volume_nfs_server:
        description: NFS server address when volume_mode is 'nfs'
        type: str
        default: ""
      volume_nfs_path:
        description: NFS path when volume_mode is 'nfs'
        type: str
        default: ""
      volume_nfs_options:
        description: NFS mount options when volume_mode is 'nfs'
        type: str
        default: "rw"
