http:
  routers:
    {{ service_name }}:
      rule: "Host(`{{ hostname }}`)"
      entryPoints:
        - https
      tls:
        certResolver: {{ cert_resolver }}
      service: {{ service_name }}
      middlewares:
        - {{ service_name }}-headers

  services:
    {{ service_name }}:
      loadBalancer:
        servers:
          - url: "http://{{ pihole_backend_ip }}:{{ pihole_backend_port }}/"

  middlewares:
    {{ service_name }}-headers:
      headers:
        customRequestHeaders:
          Host: "{{ hostname }}"