---
kind: compose
metadata:
  icon:
    provider: selfh
    id: portainer
  name: Portainer
  description: 'Portainer is a powerful and user-friendly management tool for Docker and Kubernetes environments.

    It provides a simple web-based interface to manage containers, images, networks, and volumes,

    making it easier to deploy and monitor applications.

    ## References

    - **Project:** https://www.portainer.io/

    - **Documentation:** https://docs.portainer.io/

    - **GitHub:** https://github.com/portainer/portainer'
  version: 2.37.0-alpine
  author: Christian Lempa
  date: '2025-12-12'
  tags:
    - traefik
    - swarm
    - volumes
schema: '1.2'
spec:
  general:
    vars:
      service_name:
        default: portainer
      container_timezone:
        type: str
      restart_policy:
        type: enum
        options:
          - unless-stopped
          - always
          - on-failure
          - 'no'
        default: unless-stopped
        required: true
  ports:
    vars:
      ports_http:
        default: 9000
      ports_https:
        default: 9443
      ports_edge:
        description: Host port for Edge agent (8000)
        type: int
        default: 8000
        required: true
  traefik:
    vars:
      traefik_host:
        default: portainer
      traefik_network:
        default: traefik
        type: str
        required: true
      traefik_domain:
        default: home.arpa
        type: str
        required: true
      traefik_enabled:
        type: bool
        default: false
        description: Enable Traefik integration
  traefik_tls:
    vars:
      traefik_tls_certresolver:
        type: str
        default: cloudflare
        required: true
      traefik_tls_enabled:
        type: bool
        default: false
        description: Enable Traefik TLS
  volume:
    vars:
      volume_mode:
        type: enum
        options:
          - local
          - mount
          - nfs
        default: local
        required: true
      volume_mount_path:
        type: str
        default: /mnt/storage
        needs:
          - volume_mode=mount
        required: true
      volume_nfs_server:
        type: str
        default: 192.168.1.1
        needs:
          - volume_mode=nfs
        required: true
      volume_nfs_path:
        type: str
        default: /export
        needs:
          - volume_mode=nfs
        required: true
      volume_nfs_options:
        type: str
        default: rw,nolock,soft
        needs:
          - volume_mode=nfs
        required: true
  swarm:
    vars:
      swarm_placement_host:
        type: str
        description: Target hostname for placement constraint
        default: ''
        extra: Constrains service to run on specific node by hostname
      swarm_enabled:
        type: bool
        default: false
        description: Enable Docker Swarm mode
      swarm_placement_mode:
        type: str
        default: replicated
        description: The placement mode
      swarm_replicas:
        type: int
        default: 1
        description: The number of replicas
