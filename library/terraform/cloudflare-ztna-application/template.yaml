---
kind: terraform
metadata:
  name: Cloudflare Zero Trust Access Application
  description: |-
    Create Cloudflare Zero Trust Access application with policies.

    Supports service token authentication and IP-based access policies.

    Project: https://www.cloudflare.com/zero-trust/
    Documentation: https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_access_application
  version: 5.12.0
  author: Christian Lempa
  date: "2025-11-11"
  tags: []
  icon:
    provider: selfh
    id: cloudflare
  draft: false
  next_steps: ""
schema: "1.2"
spec:
  application:
    title: Application
    required: true
    vars:
      app_name:
        description: Application name
        type: str
        default: my_application
      domain:
        description: Application domain
        type: hostname
        default: app.example.com
      session_duration:
        description: Session duration (e.g., 15m, 1h, 24h)
        type: str
        default: 15m
  general:
    vars:
      account_id_value:
        description: Cloudflare Account ID
        type: str
      resource_name:
        description: Terraform resource name (alphanumeric and underscores only)
        type: str
        default: ztna_app
      zone_id_value:
        description: Cloudflare Zone ID
        type: str
  ip_policy:
    title: IP-Based Policy
    toggle: ip_policy_enabled
    vars:
      ip_policy_enabled:
        description: Enable IP-based policy
        type: bool
        default: false
      ip_policy_name:
        description: Policy name for IP-based access
        type: str
        default: ip_policy
      ip_ranges:
        description: Comma-separated list of IP ranges (CIDR notation)
        type: str
        default: 192.0.2.0/24
  service_token_policy:
    title: Service Token Policy
    toggle: service_token_enabled
    vars:
      service_token_enabled:
        description: Enable service token policy
        type: bool
        default: false
      service_token_id:
        description: Cloudflare service token ID
        type: str
      service_token_policy_name:
        description: Policy name for service token
        type: str
        default: service_token_policy
  depends_on:
    title: Dependencies
    toggle: depends_on_enabled
    vars:
      depends_on_enabled:
        description: Enable resource dependencies
        type: bool
        default: false
      dependencies:
        description: Comma-separated list of resource dependencies
        type: str
        default: ""
  lifecycle:
    title: Lifecycle
    toggle: lifecycle_enabled
    vars:
      lifecycle_enabled:
        description: Enable lifecycle rules
        type: bool
        default: false
      prevent_destroy:
        description: Prevent resource destruction
        type: bool
        default: false
      create_before_destroy:
        description: Create replacement before destroying
        type: bool
        default: false
      ignore_changes:
        description: Comma-separated list of attributes to ignore changes for
        type: str
        default: ""
  tags:
    title: Tags
    toggle: tags_enabled
    vars:
      tags_enabled:
        description: Enable tags
        type: bool
        default: false
      tags_json:
        description: Tags in JSON format
        type: str
        default: "{}"
