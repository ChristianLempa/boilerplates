---
kind: helm
metadata:
  icon:
    provider: selfh
    id: netbox
  name: NetBox
  description: |
    Helm values template for NetBox, an open-source network infrastructure management (IPAM/DCIM)
    solution and network automation source of truth.
    ## Chart Information
    * **Chart Repository:** https://charts.bootsource.github.io/charts
    * **Chart Name:** netbox
    * **Chart Version:** Compatible with NetBox 4.2.3
    ## References
    * **Project:** https://netbox.dev/
    * **Documentation:** https://docs.netbox.dev/
    * **GitHub:** https://github.com/netbox-community/netbox
  version: 4.2.3
  author: Christian Lempa
  date: '2025-01-13'
  draft: true
schema: "1.2"
spec:
  general:
    vars:
      release_name:
        default: netbox
      namespace:
        default: netbox
  database:
    title: Database Configuration
    toggle: database_enabled
    vars:
      database_enabled:
        type: bool
        description: Enable database
        default: true
      database_type:
        type: enum
        description: Database type
        options: [postgres, mysql]
        default: postgres
      database_host:
        type: hostname
        description: Database host
        default: netbox-postgresql
      database_port:
        type: int
        description: Database port
        default: 5432
      database_name:
        type: str
        description: Database name
        default: netbox
      database_user:
        type: str
        description: Database user
        default: netbox
      database_password:
        type: str
        description: Database password
        sensitive: true
        autogenerated: true
  networking:
    title: Networking Configuration
    vars:
      network_mode:
        type: str
        description: Network mode for service
        default: ClusterIP
  redis:
    title: Redis Configuration
    description: Configure Redis for caching and task queuing
    required: true
    vars:
      redis_enabled:
        description: Enable Redis deployment
        type: bool
        default: true
      redis_host:
        description: Redis host for tasks
        type: hostname
        default: netbox-redis-master
      redis_cache_host:
        description: Redis host for caching
        type: hostname
        default: netbox-redis-master
      redis_password:
        description: Redis password
        type: str
        sensitive: true
        autogenerated: true
  email:
    title: Email Configuration
    toggle: email_enabled
    vars:
      email_enabled:
        type: bool
        description: Enable email notifications
        default: false
      email_host:
        type: hostname
        description: SMTP server hostname
        default: smtp.example.com
      email_port:
        type: int
        description: SMTP server port
        default: 587
      email_username:
        type: str
        description: SMTP username
        default: ""
      email_from:
        type: email
        description: From email address
        default: netbox@example.com
      email_use_tls:
        type: bool
        description: Use TLS/STARTTLS for SMTP connection
        default: true
      email_use_ssl:
        type: bool
        description: Use SSL for SMTP connection
        default: false
  traefik:
    title: Traefik Configuration
    toggle: traefik_enabled
    vars:
      traefik_enabled:
        type: bool
        description: Enable Traefik ingress
        default: false
      traefik_host:
        type: hostname
        description: Traefik hostname
        default: netbox.home.arpa
      traefik_tls_enabled:
        type: bool
        description: Enable TLS for Traefik ingress
        default: false
      traefik_tls_secret:
        type: str
        description: TLS secret name for Traefik ingress
        default: netbox-tls
      traefik_tls_certmanager:
        type: bool
        description: Use cert-manager for TLS certificate
        default: false
      certmanager_issuer:
        type: str
        description: Cert-manager issuer name
        needs: traefik_tls_certmanager=true
        default: letsencrypt-prod
  volumes:
    title: Volume Configuration
    vars:
      volumes_mode:
        type: enum
        description: Volume storage mode
        options: [pvc, hostPath]
        default: pvc
      volumes_pvc_name:
        type: str
        description: PVC name for volumes
        default: netbox-data
  netbox:
    title: NetBox Configuration
    description: Configure NetBox application settings
    required: true
    vars:
      netbox_secret_key:
        description: Secret Key
        extra: Used for cryptographic signing and session management
        type: str
        sensitive: true
        autogenerated: true
      netbox_superuser_name:
        description: Initial superuser username
        type: str
        default: admin
      netbox_superuser_email:
        description: Initial superuser email
        type: email
        default: admin@example.com
      netbox_superuser_password:
        description: Initial superuser password
        type: str
        sensitive: true
        autogenerated: true
      netbox_superuser_api_token:
        description: Initial superuser API token
        type: str
        sensitive: true
        autogenerated: true
      netbox_allowed_hosts:
        description: Allowed hosts (comma-separated)
        extra: Add your domain names or IP addresses
        type: str
        default: "*"
      netbox_metrics_enabled:
        description: Enable Prometheus metrics endpoint
        type: bool
        default: false
      netbox_cors_enabled:
        description: Enable CORS (Cross-Origin Resource Sharing)
        type: bool
        default: false
      netbox_cors_origins:
        description: Allowed CORS origins
        needs: netbox_cors_enabled=true
        type: str
        default: "https://example.com"
